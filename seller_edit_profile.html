<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Movies</title>
  <link rel="stylesheet" href="css\seller_edit_profile.css">
</head>
<body>

  <!-- Header Section -->
  <header>
    <div class="logo">SRH MOVIES</div>
    <nav>
      <a href="#">New Movie</a>
      <a href="#">My Tickets</a>
      <a href="#">Movie</a>
      <a href="#">TV Series</a>
    </nav>
    <div class="auth-buttons">
      <button class="logout">Logout</button>
    </div>
  </header>

  <!-- Edit Movies Form Section -->
  <section class="edit-movies">
    <h1>Edit Movies</h1>
    <form class="movie-form">
      <label for="movie-name">Movie Name</label>
      <input type="text" id="movie-name" placeholder="Enter movie name">

      <label for="genre">Genre</label>
      <select id="genre">
        <option>Select Genre</option>
      </select>

      <label for="description">Description</label>
      <textarea id="description" placeholder="Enter description"></textarea>

      <label for="release-date">Release Date</label>
      <input type="text" id="release-date">

      <label for="theater">Theater</label>
      <select id="theater">
        <option>Select Theater</option>
      </select>

      <label for="show-time">Show Time</label>
      <input type="text" id="show-time">

      <label for="day">Day</label>
      <select id="day">
        <option>Select Day</option>
      </select>

      <button type="button" class="add-details">Add Details</button>
    </form>

  <!-- Movies Table Section -->
  <section class="movies-table">
    <table>
      <thead>
        <tr>
          <th>Sr. No</th>
          <th>Movie Name</th>
          <th>Genre</th>
          <th>Description</th>
          <th>Release Date</th>
          <th>Theatre</th>
          <th>Show Time</th>
          <th>Day</th>
          <th>Edit</th>
        </tr>
      </thead>
      <tbody>
        <!-- Rows can be added here -->
      </tbody>
    </table>
    </section>
  </section>

  <!-- Footer Section -->
  <footer>
    <div class="footer-links">
      <a href="#">Product</a>
      <a href="#">Features</a>
      <a href="#">Resources</a>
      <a href="#">About</a>
      <a href="#">Blog</a>
      <a href="#">Support</a>
    </div>
    <div class="footer-logo">LOGO</div>
    <p>&copy; 2019 - 2020 Privacy - Terms</p>
  </footer>
  <script>
    // Fetch Movie Details on Page Load
    const urlParams = new URLSearchParams(window.location.search);
    const movieId = urlParams.get('id');
    console.log(movieId)

    if (movieId) {
        fetch(`http://localhost:3000/get_movie_details?id=${movieId}`)
            .then(response => response.json())
            .then(data => {
            if (data.success) {
                // Populate the form with movie details
                document.getElementById('movie-name').value = data.name;
                document.getElementById('genre').value = data.genre;
                document.getElementById('description').value = data.description;
                document.getElementById('release-date').value = data.release_date;
                document.getElementById('theater').value = data.theater;
                document.getElementById('show-time').value = data.time;
                document.getElementById('day').value = data.day;
            } else {
                alert('Failed to load movie details: ' + data.message);
            }
        })
        .catch(err => {
            console.error(err);
            alert('Failed to load movie details.');
        });
} else {
    alert('Movie ID not provided in URL.');
}
</script>
</body>
</html>
